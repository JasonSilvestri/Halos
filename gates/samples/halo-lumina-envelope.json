{
  "_meta": {
    "version": "1.0.0",
    "kind": "Halos",
    "createdUtc": "2025-09-16T00:00:00Z",
    "uuid_namespace": "6f0e5f9f-7f3a-41bf-b969-9e2b7d2f9b21",
    "notes": [ "Self-contained description of the gate, schemas, runner, and enforcement policy.", "Use this as the contract between docs, devs, and CI but expanding.", "Here is the brand new repository: https://github.com/JasonSilvestri/Halos/" ]
  },
  "project": {
    "name": "Halos",
    "envTargets": [ "LOCAL", "CI" ],
    "requirements": {
      "dotnetSdk": ">=9.0",
      "node": ">=20.0",
      "powershell": ">=7.0",
      "dotnetEf": "global or local tool available on PATH"
    }
  },
  "roots": {
    "appRoot": "E:/All/Repos/Halos/Halos",
    "gateRoot": "Halos/gates"
  },
  "paths": {
    "solution": "Halos.sln",
    "sharedProject": "Halos/src/Halos.Shared.csproj",
    "startupProject": "Halos/src/Halos.App.csproj",
    "appSettings": "Halos/src/Halos.App/appsettings.Development.json",
    "resultsDir": "Halos/gates/results",
    "toolsDir": "Halos/gates/tools",
    "schemas": {
      "gate": "Halos/gates/lumina-gate.schema.json",
      "envelope": "Halos/gates/helix-lumina-envelope.schema.json",
      "runnerConfig": "Halos/gates/lumina-gate.config.schema.json",
      "naming": "Halos/gates/naming.schema.json",
      "freezeShot": "Halos/gates/freeze-shot.schema.json"
    },
    "runner": {
      "powershell": "Halos/gates/tools/lumina-gate.ps1",
      "validator": "Halos/gates/tools/validate-gate.mjs",
      "fenceCheck": "Halos/gates/tools/check-markdown-fences.ps1"
    },
    "ciWorkflowParked": "Halos/gates/git/workflows/lumina-gate.yaml"
  },
  "security": {
    "redactConnectionStrings": true,
    "fingerprintHash": "SHA-256",
    "artifactPolicy": {
      "storeGateResults": true,
      "resultsGlob": "Halos/gates/sql/*.json"
    }
  },
  "gatePolicy": {
    "uiFenceWarningsDowngradeStatusToWarn": true,
    "schemaValidationIsHardFail": true,
    "dbCheck": {
      "default": "SkipInCI",
      "local": "BestEffort"
    }
  },
  "commands": {
    "localRun": [ "pwsh Halos/gates/tools/lumina-gate.ps1 -SolutionPath \"Halos.sln\" -SharedProject \"Halos/src/Halos.App.csproj\" -StartupProject \"Halos/src/Halos.App.csproj\" -AppSettingsPath \"Halos/src/Halos.App/appsettings.Development.json\" -Environment \"Development\" -SkipDbCheck -TreatUiAsError" ],
    "validateLatest": [ "npm --prefix Halos/gates install", "npm --prefix Halos/gates run gate:validate" ],
    "validateSpecific": [ "npm --prefix Halos/gates run gate:validate:file -- --file \"Halos/gates/sql/lumina-result.<timestamp>.json\"" ]
  },
  "npmScripts": {
    "packageJsonLocation": "Halos/gates/package.json",
    "scripts": {
      "gate:validate": "node ./gates/tools/validate-gate.mjs",
      "gate:validate:file": "node ./gates/tools/validate-gate.mjs --file",
      "gate:validate:envelope": "node ./gates/tools/validate-gate.mjs --schema envelope --file",
      "gate:validate:runner": "node ./gates/tools/validate-gate.mjs --schema runner --file",
      "gate:validate:naming": "node ./gates/tools/validate-gate.mjs --schema naming --file",
      "gate:validate:freeze": "node ./gates/tools/validate-gate.mjs --schema freeze --file"
    },
    "devDependencies": {
      "ajv": "^8.17.1",
      "ajv-formats": "^3.0.1"
    }
  },
  "resultContract": {
    "schema": "lumina-gate.schema.json",
    "statusField": "gateStatus",
    "passField": "pass",
    "warningsField": "warnings",
    "timestampField": "timestampUtc",
    "sampleResult": "Halos/gates/sql/lumina-result.sample.json"
  },
  "ciModes": [
    {
      "name": "nonBlocking",
      "continueOnError": true,
      "uploadArtifacts": true,
      "enforcePass": false
    },
    {
      "name": "enforcing",
      "continueOnError": false,
      "uploadArtifacts": true,
      "enforcePass": true
    }
  ],
  "freezeShot": {
    "enabled": true,
    "schema": "freeze-shot.schema.json",
    "notes": [ "When freezing, snapshot the latest gate result and key script/schema SHAs.", "Store under results/freeze-*.json" ]
  }
}
